import{a as D,b as y,c as L,d as R,e as Q,f as W,g as q,h as J,i as K,j as I}from"./chunk-LFCTBK2H.js";import{B as r,C as P,G as m,H as p,J as i,K as c,L as x,M as f,N as u,O as s,P as $,Q as z,R as F,S as a,T as E,U as C,W as h,Y as V,Z as H,da as G,ea as b,fa as j,ga as B,k as U,ma as w,o as O,qa as N,r as k,s as M,t as v,w as d,x as _,z as A}from"./chunk-3BHVRULU.js";var tn=["popup"];function en(t,l){t&1&&(i(0,"span",13),a(1,"Invalid value!"),c())}function on(t,l){if(t&1){let n=f();i(0,"div",2),x(1,"div",3),i(2,"div",4)(3,"div",5,0)(5,"form",6),u("submit",function(o){d(n);let g=s();return _(g.click(o))}),i(6,"label",7),a(7),c(),x(8,"input",8),m(9,en,2,0,"span",9),i(10,"div",10),x(11,"input",11),i(12,"button",12),u("click",function(){d(n);let o=s();return _(o.cancel())}),a(13,"Cancel"),c()()()()()()}if(t&2){let n=s();r(5),p("formGroup",n.formGroup),r(2),C("Enter value to ",n.label,":"),r(2),p("ngIf",n.isError),r(2),p("value",n.label)}}var X=(()=>{class t{formBuilder;label="";isOpen=!1;isError=!1;onSubmit=new A;onCancel=new A;popup;formGroup;constructor(n){this.formBuilder=n}ngOnInit(){this.formGroup=this.formBuilder.group({value:["",[y.required,y.min(0),y.pattern(/^\d+$/)]]})}clickAnywhere(n){!this.popup.nativeElement.contains(n)&&n!=this.popup.nativeElement&&this.cancel()}click(n){if(n.preventDefault(),this.formGroup.valid){this.onSubmit.emit(this.formGroup.controls.value.value);return}this.formGroup.markAsTouched()}cancel(){this.formGroup.markAsUntouched(),this.onCancel.emit(null),this.formGroup.controls.value.setValue("")}static \u0275fac=function(e){return new(e||t)(P(J))};static \u0275cmp=M({type:t,selectors:[["app-popup"]],viewQuery:function(e,o){if(e&1&&$(tn,5),e&2){let g;z(g=F())&&(o.popup=g.first)}},hostBindings:function(e,o){e&1&&u("click",function(S){return o.clickAnywhere(S.target)})},inputs:{label:"label",isOpen:"isOpen",isError:"isError"},outputs:{onSubmit:"onSubmit",onCancel:"onCancel"},standalone:!0,features:[h],decls:1,vars:1,consts:[["popup",""],["class","container",4,"ngIf"],[1,"container"],[1,"background"],[1,"content"],[1,"popup"],[3,"submit","formGroup"],["for","value"],["type","text","id","value","formControlName","value"],["class","error",4,"ngIf"],[1,"controls"],["type","submit",3,"value"],[3,"click"],[1,"error"]],template:function(e,o){e&1&&m(0,on,14,4,"div",1),e&2&&p("ngIf",o.isOpen)},dependencies:[b,K,Q,D,L,R,W,q],styles:[".container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.container[_ngcontent-%COMP%] > .background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:1;background-color:#0000009f}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center;z-index:2}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;z-index:3;border-radius:10px;padding:50px 70px;font-weight:500;font-size:21px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:30px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%]{display:flex;gap:10px;width:100%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;font-weight:500;font-size:21px;padding:20px;border-radius:10px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:20px;border-radius:10px;font-size:21px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border-color:red}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}"]})}return t})();function rn(t,l){if(t&1){let n=f();i(0,"div",9)(1,"div",10)(2,"span"),a(3," Account status: "),i(4,"span",11),a(5),c()(),i(6,"span"),a(7," Account value: "),i(8,"span",12),a(9),c(),a(10,"$ "),c()(),i(11,"div",13)(12,"button",14),u("click",function(){d(n);let o=s(2);return _(o.onControlClick("Deposit"))}),a(13," Deposit "),c(),i(14,"button",15),u("click",function(){d(n);let o=s(2);return _(o.onControlClick("Withdraw"))}),a(15," Withdraw "),c()()()}if(t&2){let n=s().ngIf;r(4),p("className",n.account.isActive?"active":"inactive"),r(),C(" ",n.account.isActive?"Active":"Inactive"," "),r(4),E(n.account.money),r(3),p("disabled",!n.account.isActive),r(2),p("disabled",!n.account.isActive)}}function cn(t,l){if(t&1){let n=f();i(0,"div",20)(1,"span",4),a(2),c(),i(3,"span",21),a(4),c(),i(5,"span",11),a(6),c(),i(7,"button",22),u("click",function(){let o=d(n).$implicit,g=s(4);return _(g.changeAccountStatus(o.username,!o.account.isActive))}),a(8),c()()}if(t&2){let n=l.$implicit;r(2),E(n.username),r(2),C("",n.account.money,"$"),r(),p("className",n.account.isActive?"active":"inactive"),r(),C(" ",n.account.isActive?"Active":"Inactive",""),r(),p("className",n.account.isActive?"inactive":"active"),r(),C(" ",n.account.isActive?"Deactive":"Activate"," ")}}function an(t,l){if(t&1&&(i(0,"div",18),m(1,cn,9,6,"div",19),c()),t&2){let n=l.ngIf;r(),p("ngForOf",n)}}function pn(t,l){if(t&1&&(i(0,"div",16),m(1,an,2,1,"div",17),V(2,"async"),c()),t&2){let n=s(2);r(),p("ngIf",H(2,1,n.allUsersInfo$))}}function sn(t,l){if(t&1){let n=f();i(0,"div",2)(1,"div",3)(2,"p",4),a(3),c(),i(4,"button",5),u("click",function(){d(n);let o=s();return _(o.logout())}),a(5,"Logout"),c()(),i(6,"div",6),m(7,rn,16,5,"div",7)(8,pn,3,3,"div",8),c()()}if(t&2){let n=l.ngIf;r(3),C("Hello ",n.username,"!"),r(4),p("ngIf",!n.isAdmin),r(),p("ngIf",n.isAdmin)}}var Y=(()=>{class t{userService;router;userInfo$;allUsersInfo$;isPopupOpen=!1;popupLabel="";popupError=!1;constructor(n,e){this.userService=n,this.router=e}ngOnInit(){this.userService.loadUserInfo().subscribe(),this.userInfo$=this.userService.getUserInfo$(),this.userInfo$.subscribe({next:n=>n&&n.isAdmin&&this.loadAllUsersInfo()}),this.allUsersInfo$=this.userService.getAllUsersInfo$()}onControlClick(n){this.isPopupOpen=!0,this.popupLabel=n,this.popupError=!1}onPopupCancel(){this.isPopupOpen=!1,this.popupError=!1}onPopupSubmit(n){let e=this.userInfo$.getValue()?.account.money;if(e&&this.popupLabel==="Withdraw"&&n>e||n<0){this.popupError=!0;return}this.userService.doAccountAction(this.popupLabel.toLowerCase(),n),this.isPopupOpen=!1,this.popupError=!1}logout(){this.userService.logout(),this.router.navigateByUrl("/auth/login")}changeAccountStatus(n,e){let o={username:n,status:e};this.userService.changeAccountStatus(o)}loadAllUsersInfo(){this.userService.loadAllUsersInfo()}static \u0275fac=function(e){return new(e||t)(P(I),P(w))};static \u0275cmp=M({type:t,selectors:[["app-home-page"]],standalone:!0,features:[h],decls:3,vars:6,consts:[["class","wrapper",4,"ngIf"],[3,"onCancel","onSubmit","isOpen","label","isError"],[1,"wrapper"],[1,"header"],[1,"username"],[1,"logout",3,"click"],[1,"container"],["class","user",4,"ngIf"],["class","admin",4,"ngIf"],[1,"user"],[1,"info"],[3,"className"],[1,"value"],[1,"controls"],["type","button",1,"deposit",3,"click","disabled"],["type","button",1,"withdraw",3,"click","disabled"],[1,"admin"],["class","accounts",4,"ngIf"],[1,"accounts"],["class","single",4,"ngFor","ngForOf"],[1,"single"],[1,"money"],[3,"click","className"]],template:function(e,o){e&1&&(m(0,sn,9,3,"div",0),V(1,"async"),i(2,"app-popup",1),u("onCancel",function(){return o.onPopupCancel()})("onSubmit",function(S){return o.onPopupSubmit(S)}),c()),e&2&&(p("ngIf",H(1,4,o.userInfo$)),r(2),p("isOpen",o.isPopupOpen)("label",o.popupLabel)("isError",o.popupError))},dependencies:[b,j,X,G],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between;padding:30px 50px}.wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%] > .username[_ngcontent-%COMP%]{font-weight:500;font-size:21px;font-style:italic}.wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%] > .logout[_ngcontent-%COMP%]{font-weight:500;font-size:21px;border-radius:10px;padding:10px;border:none;color:#fff;box-sizing:border-box;background-color:red}.wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%] > .logout[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#800000e1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100vw;height:100vh;font-size:25px;font-weight:500;display:flex;align-items:center;justify-content:center}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:fit-content;border:1px solid black;border-radius:10px;padding:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:green;font-weight:800}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:red;font-weight:800}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%]{margin-top:20px;width:100%;display:flex;gap:10px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{flex:1;font-weight:500;font-size:21px;border-radius:10px;padding:10px;border:none;color:#fff;box-sizing:border-box}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{cursor:pointer}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button.deposit[_ngcontent-%COMP%]{background-color:green}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button.deposit[_ngcontent-%COMP%]:hover{background-color:#008000e1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button.withdraw[_ngcontent-%COMP%]{background-color:red}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .user[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > button.withdraw[_ngcontent-%COMP%]:hover{background-color:#800000e1}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%]{width:100vw;height:100vh;padding:20px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:20px;font-size:25px}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%]{border:1px solid black;display:flex}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;padding:20px;border-right:1px solid black}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%]{color:green}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > .inactive[_ngcontent-%COMP%]{color:red}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:10px;border-radius:10px;box-shadow:none;margin:10px;font-size:25px;color:#fff!important;border:1px solid black}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button.active[_ngcontent-%COMP%]{background-color:green;border-color:green}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button.active[_ngcontent-%COMP%]:hover{color:green!important;background-color:#fff;border:1px solid green}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button.inactive[_ngcontent-%COMP%]{background-color:red;border-color:red}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button.inactive[_ngcontent-%COMP%]:hover{color:red!important;background-color:#fff;border:1px solid red}.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > .admin[_ngcontent-%COMP%] > .accounts[_ngcontent-%COMP%] > .single[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return t})();var Z=(t,l)=>{let n=k(I),e=k(w);return n.loadUserInfo().pipe(U(o=>!o&&e.navigateByUrl("/auth/login")))};var ln=[{path:"home",component:Y,canActivate:[Z]}],nn=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=O({imports:[N.forChild(ln),N]})}return t})();var $n=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=O({imports:[B,nn]})}return t})();export{$n as ActionsModule};
